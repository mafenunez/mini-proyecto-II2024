---
title: "Imaginarios sobre el amor: Análisis comparativo de canciones románticas con 50 años de diferencia (1960-2010)"
author: Francisca Espinoza, María Fernanda Núñez y Beatriz Pinto
subtitle: Curso Métodos computacionales para las Ciencias Sociales
fontsize: 11pt
#bibliography: "../input/mini-proyecto.bib"
#csl: "input/bib/apa6.csl"
format:
  html:
    toc: true
    toc-location: right
    toc-depth: 2
    toc-expand: 2
    toc-title: Contenidos
    number-sections: false
    number-depth: 6
    theme:
      - sandstone
    title-block-banner: true
editor: visual
---

# Relevancia

En el marco del presente estudio, corresponde preguntarse por qué sería relevante realizar un estudio comparativo de canciones románticas de dos décadas lejanas. 

En primera instancia, se reconoce la importancia del lenguaje y la música como un elemento cultural que refleja costumbres, tradiciones, formas de pensamiento y actividades cotidianas presentes en una sociedad determinada (Sánchez, 2011). Siguiendo esta línea, Martínez (2013) expone la idea de que las producciones musicales se encuentran inmersas en un espacio y un tiempo histórico determinado, lo cual lleva a que estas piezas sirvan como reflejo de las realidades y características de una cultura específica. 

En este marco y en lo que respecta a este estudio, a partir de lo planteado por las autoras, es posible afirmar que el análisis de las canciones románticas permite identificar prácticas, creencias y valores presentes en una sociedad respecto al amor, las relaciones de pareja, y el rol de los amantes, es decir, la música como una materialización de los idearios del amor a través de un artefacto cultural construído discursivamente: la música (Ospina y Suárez, 2021). Asimismo, un análisis comparativo entre las letras de canciones de dos décadas diferentes y lejanas como lo son 1960 y 2010, nos permitiría observar si existen transformaciones en lo que se entiende por amor, en cómo son las dinámicas de pareja en cada una de las épocas, en qué se valora en una relación, etc. Entendiendo, a priori, que entre estos dos momentos históricos han existido importantes cambios sociales relacionados a la libertad de la mujer, la sexualidad, nuevas formas de relacionarse románticamente, etc. 

Además de ser un trabajo relevante para el ámbito académico, esta investigación puede tener implicancias tanto prácticas como sociales que pueden resultar útiles para organismos encargados de diseñar políticas sobre la protección de la mujer y la violencia de género. Esto, ya que, como se desarrolló anteriormente las letras de canciones, al ser consumidas de forma masiva, no solo reflejan la cultura de la época sino que contribuyen a la construcción y perpetuación de ciertas ideas y prácticas relacionadas con el amor. Un ejemplo de esto, es que si el análisis revela que las canciones pueden romantizar o normalizar conductas que hoy se consideran como violentas o controladoras; como también se pueden observar canciones que reflejen empoderamiento, libertad sexual y consentimiento. Por lo tanto, esa información puede resultar valiosa para, por ejemplo, campañas públicas de sensibilización sobre percepciones de lo que es una relación sana. O construcción de programas educativos que aborden la violencia de género y el consentimiento utilizando ejemplos de piezas que resuenen con las juventudes. Por otro lado y de forma más ambiciosa, se podría pensar en un análisis en donde se identifiquen diversos patrones históricos en las representaciones del amor, en donde así se tenga claridad de las percepciones que se tenían y se tienen sobre la violencia de género y de esta manera, ajustar las normativas para abordar aquella problemática de forma mucho más efectiva. 



# Fuente de información: Genius

Genius, es una aplicación y página web fundada en el año 2009, considerada como una de las bases de datos de letras y conocimientos musicales más completas y consolidadas actualmente. Si bien en sus inicios se centraba en exhibir letras de canciones de Rap y Hip-Hop, con el pasar de los años decidió ampliar su alcance, abarcando así diversos géneros y llegando a ofrecer un extenso repertorio de más de 8 millones de canciones de diferentes estilos e idiomas. Adicionalmente, la plataforma no solo proporciona letras de canciones, sino también información completa sobre álbumes, artistas, historias detrás de las composiciones, noticias de última hora, entre otros (Genius, 2009).

# Código para extraer la información

Este código inicial es necesario para comenzar a trabajar en la sesión. Primero, instalamos el paquete "remotes" que utilizaremos para descargar el paquete "geniusr" desde github.

```{r, librerias, echo=TRUE}
# instalar paquete de ser necesario:

if (! require("remotes")) install.packages("remotes")

# cargamos el paquete: 
library(remotes)

# el paquete "geniusr" presenta algunos errores, por lo que se debe instalar una versión más actualizada desde Github:
remotes::install_github("giovanni-cutri/geniusr")


```

```{r, echo=TRUE}
# cargamos el paquete:
library(geniusr)
```

Con el paquete "geniusr" cargado, creamos el token que nos permitirá trabajar con la API de Genius. 

De ese modo, en el paso siguiente se debe crear una API y un token desde la página de Genius para poder extraer las letras. Para ello, es necesario crear una cuenta e identificar el valor de *"client access token"*.

```{r, token, echo=T}
# crear token:
Sys.setenv(GENIUS_API_TOKEN = "WdpkaOPzecLuH0-EF30G2mF-i2jGtzCWydOUWwSnoILDwHK5OTc5Cc2NH9nRTMWG")

# revisar el token:
print(Sys.getenv("GENIUS_API_TOKEN"))
genius_token()
```

Con el token habilitado, corresponde cargar los data frames sobre los que se va a trabajar.

Cargamos los data frames con las canciones. La base con las canciones actuales "canciones_2010" y la base con las canciones antiguas "canciones_1960". 

```{r, canciones, echo=TRUE}
# subimos canciones

# cargamos data frame 2010:
canciones_2010 <- read.csv2("../input/data/canciones2010.csv", encoding = "utf-8")

# cargamos data frame 1960:
canciones_1960 <- read.csv2("../input/data/canciones1960.csv", encoding = "utf-8")

```

El argumento encoding es necesario para indicar al software el formato específico en que se ecuentra nuestro archivo .csv.


## Función 

A continuación, creamos la función que nos permitirá extraer las letras. Sus parametros son el *nombre de la canción* y el *nombre del artista*. 

```{r, funcion, echo=TRUE}
# crear función

# cargamos librería para usar la funciones para procesar el texto
library(stringr)

# indicamos los parámetros
sacar_letras <- function(nombre_cancion, nombre_artista){
  
# alojamos la canción en un objeto 
  cancion <- search_song(paste0(nombre_cancion, nombre_artista))
  
# alojamos el url de la canción en un objeto    
  url_cancion <- cancion$song_lyrics_url[1] #de todas las opciones, se selecciona la primera opción 
  
# alojamos la letra de la canción en un objeto, utilizando el url generado   
  letra <- get_lyrics_url(url_cancion)

# ordenamos el texto, agrando un espaciado     
  plain_text <- paste(letra$line, collapse = " ")
  
# removemos signos de puntuación y otros símbolos para simplificar la lectura
  plain_text <- str_remove_all(plain_text, pattern = "\\p{P}")
  
# retornamos el texto plano de la canción   
  return(plain_text)
}
```

En el cógido presentado, se observa que, de manera secuencial, se generan los objetos necesarios para obtener el texto plano de la canción. 


--- 

## Iteración con ciclo "for"

Finalmente, a partir del texto plano generado, se crea un listado de letras mediante la iteracion con el comando "for".

```{r, letras, echo=TRUE}
# crear listados vacíos de letras para cada década:
lista_letras_2010 <- list()
lista_letras_1960 <- list()

```

Luego, se iterán ambas listas con el ciclo "for".

```{r, echo=TRUE}

# Se itera con ciclo "for" para el listado de canciones del 2010:
for (i in 1 : nrow(canciones_2010)) {
  lyrics <- sacar_letras(canciones_2010$nombre_cancion[i], canciones_2010$nombre_artista[i])
  lista_letras_2010 <- append(lista_letras_2010, lyrics)
}

# Se itera con ciclo "for" para el listado de canciones del 1960:
for (i in 1 : nrow(canciones_1960)) {
  lyrics <- sacar_letras(canciones_1960$nombre_cancion[i], canciones_1960$nombre_artista[i])
  lista_letras_1960 <- append(lista_letras_1960, lyrics)
}
```

De esta manera, se crean dos listas de 30 letras correspondientes a cada década, que nos servirán para el posterior análisis comparativo.

---

# Análisis descriptivo

A continuación se muestran tablas con frecuencias absolutas de algunas palabras del texto. Esta corresponde a una forma más manual y larga de hacerlo, que es previsional para el presente trabajo.

El código consiste en buscar palabras específicas con "str_count()" del paquete "stringr" y disponerlas en una tabla.

La selección de palabras es azarosa y preliminar. No se considera si estas son las palabras más frecuentes del texto, solo se presenta como un ejercicio preliminar de análisis de la información extraída.

```{r, echo=TRUE}

# texto completo para 1960:
texto_completo_1960 <- tolower(str_c(lista_letras_1960, collapse = " "))

# calcular la frecuencia absoluta de la palabra amor:
veces_amor_1960 <- str_count(texto_completo_1960, "\\bamor\\b")

# calcular la frecuencia absoluta de la palabra mía:
veces_mia_1960 <- str_count(texto_completo_1960, "\\bmía\\b")

# calcular la frecuencia absoluta de la palabra te quiero:
veces_tequiero_1960 <- str_count(texto_completo_1960, "\\bte quiero\\b")

# calcular la frecuencia absoluta de la palabra fiel:
veces_fiel_1960 <- str_count(texto_completo_1960, "\\bfiel\\b")

# calcular la frecuencia absoluta de la palabra rosas:
veces_rosas_1960 <- str_count(texto_completo_1960, "\\brosas\\b")

# calcular la frecuencia absoluta de la palabra corazón:
veces_corazon_1960 <- str_count(texto_completo_1960, "\\bcorazón\\b")

# agrupamos los vectores en un data frame:
palabras_letra_1960 <- data.frame(veces_amor_1960, veces_corazon_1960, veces_mia_1960, veces_fiel_1960, veces_rosas_1960, veces_tequiero_1960)

 
# texto completo para 2010:
texto_completo_2010 <- tolower(str_c(lista_letras_2010, collapse = " "))

# calcular la frecuencia absoluta de la palabra amor:
veces_amor_2010 <- str_count(texto_completo_2010, "\\bamor\\b")

# calcular la frecuencia absoluta de la palabra mía:
veces_mia_2010 <- str_count(texto_completo_2010, "\\bmía\\b")

# calcular la frecuencia absoluta de la palabra te quiero:
veces_tequiero_2010 <- str_count(texto_completo_2010, "\\bte quiero\\b")

# calcular la frecuencia absoluta de la palabra fiel:
veces_fiel_2010 <- str_count(texto_completo_2010, "\\bfiel\\b")

# calcular la frecuencia absoluta de la palabra rosas:
veces_rosas_2010 <- str_count(texto_completo_2010, "\\brosas\\b")

# calcular la frecuencia absoluta de la palabra corazón:
veces_corazon_2010 <- str_count(texto_completo_2010, "\\bcorazón\\b")

# agrupamos los vectores en un data frame:
palabras_letra_2010 <- data.frame(veces_amor_2010, veces_corazon_2010, veces_mia_2010, veces_fiel_2010, veces_rosas_2010, veces_tequiero_2010)


```

El siguiente código nos permite disponer la información calculada en tablas:

```{r, echo=TRUE}

# instalar el paquete de ser necesario:
if (! require("kableExtra")) install.packages("kableExtra")

# cargamos el paquete:
library(kableExtra)

# generamos tabla para las letras de 2010:
palabras_letra_2010 %>% kableExtra::kable(
  # ajustamos los títulos de las columnas:
    col.names = c("Frecuencia: amor", "Frecuencia: corazón", "Frecuencia: mía", "Frecuencia: fiel", "Frecuencia: rosas", "Frecuencia: te quiero"))

# generamos tabla para las letras de 1960:
palabras_letra_1960 %>% kableExtra::kable(
  # ajustamos los títulos de las columnas:
    col.names = c("Frecuencia: amor", "Frecuencia: corazón", "Frecuencia: mía", "Frecuencia: fiel", "Frecuencia: rosas", "Frecuencia: te quiero"))
```

<br/>

Es posible observar preliminarmente que las palabras "corazón" y "fiel" se repiten más veces en las canciones de la década de 2010 que en la década de 1960. Al contrario, en las canciones del 1960, aparecen con más frecuencia las palabras "mía", "rosas" y "te quiero". La palabra "amor" se observa en una frecuencia similar para las caciones de ambas décadas.

--- 
# Referencias 

- Apple Music. (2024). 2010s Love Song Essentials [Lista de Reproducción]. Apple  Music. Obtenido de <https://music.apple.com/cl/playlist/2010s-love-song-essentials/pl.a4e1706901964f46b1abe8dd0e16e2e0?l=en-GB>
- Apple Music. (2024). ’60s Love Song Essentials [Lista de Reproducción]. Apple  Music. Obtenido de <https://music.apple.com/cl/playlist/60s-love-song-essentials/pl.048e966cda9340fe9ce76efa890bf055?l=en-GB>
- Genius. (27 de Agosto de 2009). Genius: About Us. Obtenido de <https://genius.com/Genius-about-genius-annotated>
- Martínez, D. (2013). Música y representaciones sociales de la sexualidad: un estudio de caso sobre los jóvenes reggaetoneros en el Distrito Federal. Obtenido de: <https://hdl.handle.net/11191/5647>
- Ospina, S. & Suárez, M. (2021). Para amarte, necesito una razón: configuraciones del discurso amoroso en las canciones románticas en español.
- Sánchez, A. C. (2011). Las diferencias y similitudes semánticas existentes en veinte letras de amor de reggaetón y bolero puertorriqueños. Recuperado de: <http://hdl.handle.net/10554/5935>


 
